"use strict";(self["webpackChunkfast_front"]=self["webpackChunkfast_front"]||[]).push([[376],{78376:function(e,t,n){n.r(t),n.d(t,{default:function(){return N}});var i=n(59835),r=n(61957),a={class:"col",style:{width:"400px","max-width":"90%"}},o={class:"col",style:{width:"400px","max-width":"90%"}},s={class:"col",style:{width:"400px","max-width":"90%"}},l={class:"col",style:{width:"400px","max-width":"90%"}},d={class:"col",style:{width:"400px","max-width":"90%"}},c={class:"col row justify-center items-center",style:{width:"400px","max-width":"90%"}},u=(0,i._)("div",null,"验证码加载较慢，请耐心等待。",-1),p={class:"col",style:{width:"400px","max-width":"90%"}};function h(e,t,n,h,m,f){var y=(0,i.up)("q-icon"),w=(0,i.up)("q-input"),g=(0,i.up)("vue-hcaptcha"),b=(0,i.up)("q-btn"),v=(0,i.up)("q-form"),x=(0,i.up)("q-page");return(0,i.wg)(),(0,i.j4)(x,{class:"flex column items-center flex-center"},{default:(0,i.w5)((function(){return[(0,i.Wm)(v,{class:"items-center flex flex-center column q-col-gutter-md",ref:"formRef",onKeypress:t[8]||(t[8]=(0,r.D2)((function(t){return e.loginOnclick(e.submitData)}),["enter"]))},{default:(0,i.w5)((function(){return[(0,i._)("div",a,[(0,i.Wm)(w,{color:"primary","hide-bottom-space":"","label-color":"secondary","bg-color":"white",outlined:"",modelValue:e.submitData.email,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.submitData.email=t}),label:"邮箱",rules:[function(t){return e.rules.email(t)||"请输入合法的邮箱"},function(e){return""!=e||"不能为空"}]},{prepend:(0,i.w5)((function(){return[(0,i.Wm)(y,{name:"person",color:"primary"})]})),_:1},8,["modelValue","rules"])]),(0,i._)("div",o,[(0,i.Wm)(w,{color:"primary","hide-bottom-space":"","label-color":"secondary","bg-color":"white",outlined:"",modelValue:e.submitData.name,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.submitData.name=t}),label:"用户名",rules:[function(e){return e.length>=2&&e.length<=64||"最小长度2最大长度64"}]},{prepend:(0,i.w5)((function(){return[(0,i.Wm)(y,{name:"person",color:"primary"})]})),_:1},8,["modelValue","rules"])]),(0,i._)("div",s,[(0,i.Wm)(w,{color:"primary","hide-bottom-space":"","label-color":"secondary","bg-color":"white",type:e.status.pwd1?"password":"text",outlined:"",modelValue:e.submitData.password,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.submitData.password=t}),rules:[function(e){return""!=e||"不能为空"}],label:"密码"},{prepend:(0,i.w5)((function(){return[(0,i.Wm)(y,{name:"lock",color:"primary"})]})),append:(0,i.w5)((function(){return[(0,i.Wm)(y,{name:e.status.pwd1?"visibility_off":"visibility",class:"cursor-pointer",onClick:t[2]||(t[2]=function(t){return e.status.pwd1=!e.status.pwd1})},null,8,["name"])]})),_:1},8,["type","modelValue","rules"])]),(0,i._)("div",l,[(0,i.Wm)(w,{"hide-bottom-space":"",color:"primary","label-color":"secondary","bg-color":"white",type:e.status.pwd2?"password":"text",outlined:"",modelValue:e.submitData.password2,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.submitData.password2=t}),hint:"两次密码需要保持一致",rules:[function(t){return t==e.submitData.password||"两次密码不同"}],label:"重复密码"},{prepend:(0,i.w5)((function(){return[(0,i.Wm)(y,{name:"lock",color:"primary"})]})),append:(0,i.w5)((function(){return[(0,i.Wm)(y,{name:e.status.pwd2?"visibility_off":"visibility",class:"cursor-pointer",onClick:t[4]||(t[4]=function(t){return e.status.pwd2=!e.status.pwd2})},null,8,["name"])]})),_:1},8,["type","modelValue","rules"])]),(0,i._)("div",d,[(0,i.Wm)(w,{"hide-bottom-space":"",color:"primary","label-color":"secondary","bg-color":"white",outlined:"",modelValue:e.submitData.code,"onUpdate:modelValue":t[6]||(t[6]=function(t){return e.submitData.code=t}),label:"邀请码(可选)",rules:[function(t){return!t||e.rules.uuid(t)||"请输入正确的邀请码"}]},{prepend:(0,i.w5)((function(){return[(0,i.Wm)(y,{name:"key",color:"primary"})]})),_:1},8,["modelValue","rules"])]),(0,i._)("div",c,[u,(0,i.Wm)(g,{class:"",ref:"capRef",onVerify:e.onVerify,sitekey:"3420e08f-70d9-46f4-806b-a7f060dfa2fb"},null,8,["onVerify"])]),(0,i._)("div",p,[(0,i.Wm)(b,{unelevated:"",color:"primary",label:"注册",style:{width:"100%"},onClick:t[7]||(t[7]=function(t){return e.loginOnclick(e.submitData)})})])]})),_:1},512)]})),_:1})}var m=n(47798),f=n.n(m),y=n(1001),w=n.n(y),g=(n(69665),n(92138)),b=n(60499),v=n(28339),x=n(36201),k=n.n(x),C=n(19302);const V="hcaptcha-api-script-id",_="_hcaptchaOnLoad";let I,D;const E=new Promise(((e,t)=>{I=e,D=t}));function W(e){if(window.hcaptcha)return I(),E;if(document.getElementById(V))return E;window[_]=I;const t=q(e),n=document.createElement("script");return n.id=V,n.src=t,n.async=!0,n.defer=!0,n.onerror=e=>{D("Failed to load api.js")},document.head.appendChild(n),E}function q(e){let t=e.apiEndpoint;return t=R(t,"render","explicit"),t=R(t,"onload",_),t=R(t,"recaptchacompat",!1===e.reCaptchaCompat?"off":null),t=R(t,"hl",e.language),t=R(t,"sentry",e.sentry),t=R(t,"endpoint",e.endpoint),t=R(t,"assethost",e.assethost),t=R(t,"imghost",e.imghost),t=R(t,"reportapi",e.reportapi),t}function R(e,t,n){if(void 0!==n&&null!==n){const i=e.includes("?")?"&":"?";return e+i+t+"="+encodeURIComponent(n)}return e}var S=(e,t)=>{for(const[n,i]of t)e[n]=i;return e};const $={name:"VueHcaptcha",props:{sitekey:{type:String,required:!0},theme:{type:String,default:void 0},size:{type:String,default:void 0},tabindex:{type:String,default:void 0},language:{type:String,default:void 0},reCaptchaCompat:{type:Boolean,default:!0},challengeContainer:{type:String,default:void 0},rqdata:{type:String,default:void 0},sentry:{type:Boolean,default:!0},apiEndpoint:{type:String,default:"https://hcaptcha.com/1/api.js"},endpoint:{type:String,default:void 0},reportapi:{type:String,default:void 0},assethost:{type:String,default:void 0},imghost:{type:String,default:void 0}},data:()=>({widgetId:null,hcaptcha:null,renderedCb:null}),mounted(){return W(this.$props).then(this.onApiLoaded).catch(this.onError)},unmounted(){this.teardown()},destroyed(){this.teardown()},methods:{teardown(){this.widgetId&&(this.hcaptcha.reset(this.widgetId),this.hcaptcha.remove(this.widgetId))},onApiLoaded(){this.hcaptcha=window.hcaptcha;const e={sitekey:this.sitekey,theme:this.theme,size:this.size,tabindex:this.tabindex,callback:this.onVerify,"expired-callback":this.onExpired,"chalexpired-callback":this.onChallengeExpired,"error-callback":this.onError,"open-callback":this.onOpen,"close-callback":this.onClose};this.challengeContainer&&(e["challenge-container"]=this.challengeContainer),this.widgetId=this.hcaptcha.render(this.$el,e),this.rqdata&&this.hcaptcha.setData(this.widgetId,{rqdata:this.rqdata}),this.onRendered()},execute(){this.widgetId?(this.hcaptcha.execute(this.widgetId),this.onExecuted()):this.renderedCb=()=>{this.renderedCb=null,this.execute()}},executeAsync(){if(this.widgetId)return this.onExecuted(),this.hcaptcha.execute(this.widgetId,{async:!0});let e;const t=new Promise((t=>{e=t}));return this.renderedCb=()=>{this.renderedCb=null,e()},t.then(this.executeAsync)},reset(){this.widgetId?(this.hcaptcha.reset(this.widgetId),this.onReset()):this.$emit("error","Element is not rendered yet and thus cannot reset it. Wait for `rendered` event to safely call reset.")},onRendered(){this.$emit("rendered"),this.renderedCb&&this.renderedCb()},onExecuted(){this.$emit("executed")},onReset(){this.$emit("reset")},onError(e){this.$emit("error",e),this.reset()},onVerify(){const e=this.hcaptcha.getResponse(this.widgetId),t=this.hcaptcha.getRespKey(this.widgetId);this.$emit("verify",e,t)},onExpired(){this.$emit("expired")},onChallengeExpired(){this.$emit("challengeExpired")},onOpen(){this.$emit("opened")},onClose(){this.$emit("closed")}}},U={id:"hcap-script"};function Z(e,t,n,r,a,o){return(0,i.wg)(),(0,i.iD)("div",U)}var H=S($,[["render",Z]]),O=(0,i.aZ)({name:"RegisterPage",components:{VueHcaptcha:H},setup:function(){var e=(0,v.yj)(),t=(0,v.tv)(),n=(0,C.Z)(),i=(0,b.iH)(null),r=(0,b.iH)(null),a=(0,b.iH)({email:k().isEmail,require:k().NonNullable,uuid:k().isUUID}),o=(0,b.iH)({email:"",name:"",password:"",password2:"",code:e.query.code,token:""}),s=(0,b.iH)({pwd1:!0,pwd2:!0});function l(e){return d.apply(this,arguments)}function d(){return d=w()(f()().mark((function e(a){var o;return f()().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i.value.validate();case 2:if(o=e.sent,o){e.next=5;break}return e.abrupt("return");case 5:if(""!=a.token){e.next=8;break}return n.notify({type:"negative",message:"请完成验证码！"}),e.abrupt("return");case 8:(0,g.z2)(a).then((function(e){n.notify({type:"positive",message:"注册成功,请登录！"}),t.push({name:"login"})})).catch((function(e){r.value.reset(),null!=e&&(20102==e.response.data.code?n.notify({type:"negative",message:"邮箱已注册"}):20104==e.response.data.code?n.notify({type:"negative",message:"注册失败，请检查邀请码是否正确"}):20107==e.response.data.code?n.notify({type:"negative",message:"请完成验证码"}):n.notify({type:"negative",message:"注册失败，错误信息："+e.response.data.message}))}));case 9:case"end":return e.stop()}}),e)}))),d.apply(this,arguments)}function c(e){o.value.token=e}return{onVerify:c,loginOnclick:l,submitData:o,status:s,formRef:i,rules:a,capRef:r}}}),j=n(11639),Q=n(69885),z=n(8326),A=n(66611),B=n(22857),P=n(24455),L=n(69984),F=n.n(L);const K=(0,j.Z)(O,[["render",h]]);var N=K;F()(O,"components",{QPage:Q.Z,QForm:z.Z,QInput:A.Z,QIcon:B.Z,QBtn:P.Z})}}]);