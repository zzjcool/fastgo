"use strict";(globalThis["webpackChunkfast_front"]=globalThis["webpackChunkfast_front"]||[]).push([[641],{3017:(e,a,t)=>{t.d(a,{A8:()=>n});var l=t(1569);const o="/template";async function n(e=0,a=10){return(0,l.api)({url:o+"/list",method:"get",params:{page:e,pageSize:a}})}},917:(e,a,t)=>{t.d(a,{Ht:()=>r,TI:()=>d,p6:()=>c,uD:()=>n});var l=t(1569);const o="/whitesite";async function n(e=0,a=10){return(0,l.api)({url:o+"/list",method:"get",params:{page:e,pageSize:a}})}async function c({name:e,home:a,comment:t,importHost:n}){return(0,l.api)({url:o,method:"post",data:{name:e,home:a,comment:t,importHost:n}})}async function r(e){return(0,l.api)({url:o,method:"delete",data:{ids:e}})}async function d(e){return(0,l.api)({url:o,method:"put",data:e})}},2641:(e,a,t)=>{t.r(a),t.d(a,{default:()=>pe});var l=t(9835),o=t(6970);const n=e=>((0,l.dD)("data-v-7685794e"),e=e(),(0,l.Cn)(),e),c=n((()=>(0,l._)("div",{class:"text-h6"},"模版管理",-1))),r={style:{width:"100%"}},d={class:"text-subtitle1 text-white text-weight-bold"};function u(e,a,t,n,u,s){const i=(0,l.up)("q-card-section"),m=(0,l.up)("create-card"),p=(0,l.up)("delete-cofirm-table"),w=(0,l.up)("q-separator"),f=(0,l.up)("q-checkbox"),g=(0,l.up)("q-th"),b=(0,l.up)("q-tr"),h=(0,l.up)("update-import-host"),W=(0,l.up)("q-td"),v=(0,l.up)("edit-white"),y=(0,l.up)("q-table"),_=(0,l.up)("q-card"),Z=(0,l.up)("q-page");return(0,l.wg)(),(0,l.j4)(Z,{class:"column"},{default:(0,l.w5)((()=>[(0,l.Wm)(_,{class:"list-card",square:"",flat:""},{default:(0,l.w5)((()=>[(0,l.Wm)(i,{class:"bg-primary text-white"},{default:(0,l.w5)((()=>[c])),_:1}),(0,l.Wm)(i,null,{default:(0,l.w5)((()=>[(0,l.Wm)(m,{afterSubmit:e.afterSubmit},null,8,["afterSubmit"]),(0,l.Wm)(p,{rows:e.selected,columns:e.columns,loading:e.loading,afterDelete:e.afterSubmit},null,8,["rows","columns","loading","afterDelete"])])),_:1}),(0,l.Wm)(w),(0,l._)("div",r,[(0,l.Wm)(y,{rows:e.rows,loading:e.loading,columns:e.columns,selection:"multiple",selected:e.selected,"onUpdate:selected":a[0]||(a[0]=a=>e.selected=a),"row-key":"name",flat:"",pagination:e.pageConfig,"onUpdate:pagination":a[1]||(a[1]=a=>e.pageConfig=a),onRequest:e.newPagination,square:""},{header:(0,l.w5)((e=>[(0,l.Wm)(b,{props:e},{default:(0,l.w5)((()=>[(0,l.Wm)(g,{class:"bg-primary"},{default:(0,l.w5)((()=>[(0,l.Wm)(f,{modelValue:e.selected,"onUpdate:modelValue":a=>e.selected=a,color:"accent","keep-color":"",class:"text-black"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.cols,(a=>((0,l.wg)(),(0,l.j4)(g,{key:a.name,props:e,class:"bg-primary"},{default:(0,l.w5)((()=>[(0,l._)("div",d,(0,o.zw)(a.label),1)])),_:2},1032,["props"])))),128))])),_:2},1032,["props"])])),"body-cell-importHost":(0,l.w5)((a=>[(0,l.Wm)(W,{props:a},{default:(0,l.w5)((()=>[(0,l.Wm)(h,{data:a,afterFunc:e.afterSubmit,loading:e.loading},null,8,["data","afterFunc","loading"])])),_:2},1032,["props"])])),"body-cell-operation":(0,l.w5)((a=>[(0,l.Wm)(W,{props:a},{default:(0,l.w5)((()=>[(0,l.Wm)(v,{data:a,afterFunc:e.afterSubmit,loading:e.loading},null,8,["data","afterFunc","loading"])])),_:2},1032,["props"])])),_:1},8,["rows","loading","columns","selected","pagination","onRequest"])])])),_:1})])),_:1})}var s=t(9302),i=t(917),m=t(499);const p=(0,l._)("div",{class:"row no-wrap items-center"},[(0,l._)("div",{class:"col text-h6 ellipsis"}," 添加模版 ")],-1),w={class:"column"};function f(e,a,t,o,n,c){const r=(0,l.up)("q-card-section"),d=(0,l.up)("q-icon"),u=(0,l.up)("q-input"),s=(0,l.up)("q-btn"),i=(0,l.up)("q-form"),m=(0,l.up)("q-separator"),f=(0,l.up)("q-card"),g=(0,l.up)("q-dialog");return(0,l.wg)(),(0,l.j4)(s,{icon:"add",unelevated:"",color:"accent",onClick:a[6]||(a[6]=a=>e.card=!0)},{default:(0,l.w5)((()=>[(0,l.Wm)(g,{modelValue:e.card,"onUpdate:modelValue":a[5]||(a[5]=a=>e.card=a)},{default:(0,l.w5)((()=>[(0,l.Wm)(f,{class:"create-card"},{default:(0,l.w5)((()=>[(0,l.Wm)(r,{class:"bg-secondary text-white"},{default:(0,l.w5)((()=>[p])),_:1}),(0,l.Wm)(r,{class:""},{default:(0,l.w5)((()=>[(0,l.Wm)(i,{onSubmit:e.onSubmit,class:"q-gutter-md"},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{filled:"",modelValue:e.data.name,"onUpdate:modelValue":a[0]||(a[0]=a=>e.data.name=a),color:"accent","label-color":"accent",label:"模版名称","lazy-rules":"",rules:[e=>e&&e.length>0||"至少要写点什么吧"]},{prepend:(0,l.w5)((()=>[(0,l.Wm)(d,{name:"public",color:"accent"})])),_:1},8,["modelValue","rules"]),(0,l.Wm)(u,{filled:"",modelValue:e.data.home,"onUpdate:modelValue":a[1]||(a[1]=a=>e.data.home=a),hint:"站点主页的地址，为了安全，只支持https协议",label:"模版说明",color:"accent","label-color":"accent","lazy-rules":"",rules:[e=>e&&e.length>0||"至少要写点什么吧"]},{prepend:(0,l.w5)((()=>[(0,l.Wm)(d,{name:"link",color:"accent"})])),_:1},8,["modelValue","rules"]),(0,l.Wm)(u,{filled:"",modelValue:e.data.comment,"onUpdate:modelValue":a[2]||(a[2]=a=>e.data.comment=a),label:"模版说明",color:"accent","label-color":"accent","lazy-rules":""},{prepend:(0,l.w5)((()=>[(0,l.Wm)(d,{name:"comment",color:"accent"})])),_:1},8,["modelValue"]),(0,l.Wm)(u,{hint:"每条记录一行",label:"模版",modelValue:e.text,"onUpdate:modelValue":a[3]||(a[3]=a=>e.text=a),filled:"",color:"accent","label-color":"accent",autogrow:""},{prepend:(0,l.w5)((()=>[(0,l.Wm)(d,{name:"add_link",color:"accent"})])),_:1},8,["modelValue"]),(0,l.Wm)(u,{hint:"yaml格式",label:"模版默认值",modelValue:e.text,"onUpdate:modelValue":a[4]||(a[4]=a=>e.text=a),filled:"",color:"accent","label-color":"accent",autogrow:""},{prepend:(0,l.w5)((()=>[(0,l.Wm)(d,{name:"add_link",color:"accent"})])),_:1},8,["modelValue"]),(0,l._)("div",w,[(0,l.Wm)(s,{label:"添加",type:"submit",unelevated:"",color:"accent"})])])),_:1},8,["onSubmit"])])),_:1}),(0,l.Wm)(m)])),_:1})])),_:1},8,["modelValue"])])),_:1})}const g=(0,l.aZ)({name:"createCard",props:{afterSubmit:{type:Function,default:()=>{}}},setup(e){const a=(0,m.iH)(!1),t=(0,s.Z)(),l=(0,m.iH)({name:"",home:"",comment:"",importHost:[]});const o=(0,m.iH)("");function n(){l.value.importHost=o.value.split("\n"),(0,i.p6)(l.value).then((l=>{t.notify({type:"positive",message:"添加成功"}),e.afterSubmit(),a.value=!1})).catch((e=>{t.notify({type:"negative",message:e.response.data.message})}))}return{data:l,onSubmit:n,card:a,text:o}}});var b=t(1639),h=t(4455),W=t(2074),v=t(4458),y=t(3190),_=t(8326),Z=t(6611),q=t(2857),V=t(926),Q=t(9984),k=t.n(Q);const x=(0,b.Z)(g,[["render",f]]),D=x;k()(g,"components",{QBtn:h.Z,QDialog:W.Z,QCard:v.Z,QCardSection:y.Z,QForm:_.Z,QInput:Z.Z,QIcon:q.Z,QSeparator:V.Z});const C={class:"row no-wrap text-h6 items-center"},S=(0,l._)("div",{class:"col ellipsis"}," 请确认需要删除的内容： ",-1),H={style:{width:"100%"}},U={class:"text-subtitle1 text-white text-weight-bold"},T={class:"column"};function F(e,a,t,n,c,r){const d=(0,l.up)("q-icon"),u=(0,l.up)("q-card-section"),s=(0,l.up)("q-th"),i=(0,l.up)("q-tr"),m=(0,l.up)("q-table"),p=(0,l.up)("q-separator"),w=(0,l.up)("q-btn"),f=(0,l.up)("q-card"),g=(0,l.up)("q-dialog");return(0,l.wg)(),(0,l.j4)(w,{class:"q-ml-sm",color:"accent",disable:e.loading||e.rows.length<=0,label:"删除",unelevated:"",onClick:a[1]||(a[1]=a=>e.layout=!0)},{default:(0,l.w5)((()=>[(0,l.Wm)(g,{modelValue:e.layout,"onUpdate:modelValue":a[0]||(a[0]=a=>e.layout=a)},{default:(0,l.w5)((()=>[(0,l.Wm)(f,{class:"create-card",style:{width:"100%"}},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{class:"bg-secondary text-accent"},{default:(0,l.w5)((()=>[(0,l._)("div",C,[(0,l.Wm)(d,{name:"warning"}),S])])),_:1}),(0,l._)("div",H,[(0,l.Wm)(m,{class:"my-sticky-header-table",rows:e.rows,columns:e.columns,"row-key":"name",flat:"",pagination:{rowsPerPage:0},square:"","hide-bottom":""},{header:(0,l.w5)((e=>[(0,l.Wm)(i,{props:e},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.cols,(a=>((0,l.wg)(),(0,l.j4)(s,{key:a.name,props:e,class:"bg-secondary"},{default:(0,l.w5)((()=>[(0,l._)("div",U,(0,o.zw)(a.label),1)])),_:2},1032,["props"])))),128))])),_:2},1032,["props"])])),_:1},8,["rows","columns"])]),(0,l.Wm)(p),(0,l.Wm)(u,{class:""},{default:(0,l.w5)((()=>[(0,l._)("div",T,[(0,l.Wm)(w,{label:"删除",color:"accent",unelevated:"",onClick:e.onDelete},null,8,["onClick"])])])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1},8,["disable"])}t(9665);const I=(0,l.aZ)({name:"deleteCofirmTable",props:{columns:Array,rows:Array,loading:Boolean,afterDelete:{type:Function,default:()=>{}}},setup(e){const a=(0,m.iH)(!1),t=(0,s.Z)();async function l(){const l=[];e.rows.forEach((e=>{l.push(e.id)})),await(0,i.Ht)(l),t.notify({type:"positive",message:"删除成功！"}),a.value=!1,e.afterDelete()}return{layout:a,onDelete:l}}});var P=t(7799),z=t(3532),j=t(1682);const B=(0,b.Z)(I,[["render",F]]),A=B;k()(I,"components",{QBtn:h.Z,QDialog:W.Z,QCard:v.Z,QCardSection:y.Z,QIcon:q.Z,QTable:P.Z,QTr:z.Z,QTh:j.Z,QSeparator:V.Z});const R={key:0},K={key:0},L={class:"row no-wrap text-h6 items-center"},Y=(0,l._)("div",{class:"col ellipsis"}," 修改匹配的URL ",-1),E={class:"q-pa-md"},N={class:"column"};function O(e,a,t,o,n,c){const r=(0,l.up)("q-badge"),d=(0,l.up)("q-icon"),u=(0,l.up)("q-card-section"),s=(0,l.up)("q-input"),i=(0,l.up)("q-separator"),m=(0,l.up)("q-btn"),p=(0,l.up)("q-card"),w=(0,l.up)("q-dialog");return(0,l.wg)(),(0,l.iD)("div",{class:"column full-height full-width",onClick:a[3]||(a[3]=a=>e.layout=!1)},[e.data.value?((0,l.wg)(),(0,l.iD)("div",R,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.data.value.slice(0,3),(e=>((0,l.wg)(),(0,l.iD)("div",{key:e},[(0,l.Wm)(r,{color:"accent",label:e},null,8,["label"])])))),128)),e.data.value.length>3?((0,l.wg)(),(0,l.iD)("div",K,[(0,l.Wm)(r,{color:"accent",label:"..."})])):(0,l.kq)("",!0)])):(0,l.kq)("",!0),(0,l.Wm)(w,{modelValue:e.layout,"onUpdate:modelValue":a[2]||(a[2]=a=>e.layout=a)},{default:(0,l.w5)((()=>[(0,l.Wm)(p,{class:"create-card"},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{class:"bg-secondary text-accent"},{default:(0,l.w5)((()=>[(0,l._)("div",L,[(0,l.Wm)(d,{name:"warning"}),Y])])),_:1}),(0,l._)("div",E,[(0,l.Wm)(s,{hint:"每条记录一行",modelValue:e.text,"onUpdate:modelValue":a[0]||(a[0]=a=>e.text=a),filled:"",autogrow:""},null,8,["modelValue"])]),(0,l.Wm)(i),(0,l.Wm)(u,{class:""},{default:(0,l.w5)((()=>[(0,l._)("div",N,[(0,l.Wm)(m,{label:"更新",color:"accent",unelevated:"",onClick:a[1]||(a[1]=a=>e.onUpdate(e.data.row))})])])),_:1})])),_:1})])),_:1},8,["modelValue"])])}const $=(0,l.aZ)({name:"updateImportHost",props:{data:Object,loading:Boolean,afterFunc:{type:Function,default:()=>{}}},setup(e){const a=(0,m.iH)(!1),t=(0,s.Z)();function l(e){return e?e.join("\n"):""}const o=(0,m.iH)(l(e.data.value));async function n(l){l.importHost=o.value.split("\n"),await(0,i.TI)(l).catch((e=>(t.notify({type:"negative",message:"更新失败"}),Promise.reject(error)))),t.notify({type:"positive",message:"更新成功"}),a.value=!1,e.afterFunc()}return{layout:a,onUpdate:n,text:o}}});var G=t(990);const J=(0,b.Z)($,[["render",O]]),M=J;k()($,"components",{QBadge:G.Z,QDialog:W.Z,QCard:v.Z,QCardSection:y.Z,QIcon:q.Z,QInput:Z.Z,QSeparator:V.Z,QBtn:h.Z,QTable:P.Z});const X={class:"text-left q-gutter-md"},ee=(0,l._)("div",{class:"row no-wrap items-center"},[(0,l._)("div",{class:"col text-h6 ellipsis"}," 编辑 ")],-1),ae={class:"column"};function te(e,a,t,o,n,c){const r=(0,l.up)("q-card-section"),d=(0,l.up)("q-icon"),u=(0,l.up)("q-input"),s=(0,l.up)("q-btn"),i=(0,l.up)("q-form"),m=(0,l.up)("q-separator"),p=(0,l.up)("q-card"),w=(0,l.up)("q-dialog");return(0,l.wg)(),(0,l.iD)("div",X,[(0,l.Wm)(s,{icon:"edit",unelevated:"",round:"",size:"sm",color:"accent",onClick:a[6]||(a[6]=a=>e.card=!0)},{default:(0,l.w5)((()=>[(0,l.Wm)(w,{modelValue:e.card,"onUpdate:modelValue":a[5]||(a[5]=a=>e.card=a)},{default:(0,l.w5)((()=>[(0,l.Wm)(p,{class:"create-card"},{default:(0,l.w5)((()=>[(0,l.Wm)(r,{class:"bg-secondary text-white"},{default:(0,l.w5)((()=>[ee])),_:1}),(0,l.Wm)(r,{class:""},{default:(0,l.w5)((()=>[(0,l.Wm)(i,{onSubmit:a[4]||(a[4]=a=>e.onSubmit(e.newData)),class:"q-gutter-md"},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{filled:"",modelValue:e.newData.name,"onUpdate:modelValue":a[0]||(a[0]=a=>e.newData.name=a),color:"accent",disable:"",hint:"不可更改","label-color":"accent",label:"站点名称","lazy-rules":"",rules:[e=>e&&e.length>0||"至少要写点什么吧"]},{prepend:(0,l.w5)((()=>[(0,l.Wm)(d,{name:"public",color:"accent"})])),_:1},8,["modelValue","rules"]),(0,l.Wm)(u,{filled:"",modelValue:e.newData.home,"onUpdate:modelValue":a[1]||(a[1]=a=>e.newData.home=a),hint:"站点主页的地址，为了安全，只支持https协议",label:"主页",color:"accent","label-color":"accent","lazy-rules":"",rules:[e=>e&&e.length>0||"至少要写点什么吧"]},{prepend:(0,l.w5)((()=>[(0,l.Wm)(d,{name:"link",color:"accent"})])),_:1},8,["modelValue","rules"]),(0,l.Wm)(u,{filled:"",modelValue:e.newData.comment,"onUpdate:modelValue":a[2]||(a[2]=a=>e.newData.comment=a),label:"介绍",color:"accent","label-color":"accent","lazy-rules":""},{prepend:(0,l.w5)((()=>[(0,l.Wm)(d,{name:"comment",color:"accent"})])),_:1},8,["modelValue"]),(0,l.Wm)(u,{hint:"每条记录一行",label:"匹配URL",modelValue:e.text,"onUpdate:modelValue":a[3]||(a[3]=a=>e.text=a),filled:"",color:"accent","label-color":"accent",autogrow:""},{prepend:(0,l.w5)((()=>[(0,l.Wm)(d,{name:"add_link",color:"accent"})])),_:1},8,["modelValue"]),(0,l._)("div",ae,[(0,l.Wm)(s,{label:"确认",type:"submit",unelevated:"",color:"accent"})])])),_:1})])),_:1}),(0,l.Wm)(m)])),_:1})])),_:1},8,["modelValue"])])),_:1})])}const le=(0,l.aZ)({name:"editWhite",props:{data:Object,loading:Boolean,afterFunc:{type:Function,default:()=>{}}},setup(e){const a=(0,m.iH)(!1),t=(0,s.Z)(),l=(0,m.iH)({id:e.data.row.id,name:e.data.row.name,home:e.data.row.home,comment:e.data.row.comment,enable:e.data.row.enable});function o(e){return e?e.join("\n"):""}const n=(0,m.iH)(o(e.data.row.importHost));async function c(l){l.importHost=n.value.split("\n"),await(0,i.TI)(l).catch((e=>(t.notify({type:"negative",message:"更新失败"}),Promise.reject(error)))),t.notify({type:"positive",message:"更新成功"}),a.value=!1,e.afterFunc()}return{newData:l,onSubmit:c,card:a,text:n}}}),oe=(0,b.Z)(le,[["render",te]]),ne=oe;k()(le,"components",{QBtn:h.Z,QDialog:W.Z,QCard:v.Z,QCardSection:y.Z,QForm:_.Z,QInput:Z.Z,QIcon:q.Z,QSeparator:V.Z});var ce=t(3017);const re=[{name:"name",required:!0,label:"标题",align:"left",field:e=>e.title,format:e=>`${e}`,sortable:!1},{name:"id",align:"left",label:"ID",field:"id",sortable:!1},{name:"remark",align:"left",label:"说明",field:"remark",sortable:!1},{name:"operation",align:"left",label:"操作",field:"operation",sortable:!1}],de=(0,l.aZ)({name:"WhiteList",setup(){const e=(0,m.iH)({page:1,rowsPerPage:10,rowsNumber:0}),a=(0,m.iH)([]),t=(0,m.iH)(!1),o=(0,m.iH)([]),n=((0,s.Z)(),l=>{t.value=!0,(0,ce.A8)(l.pagination.page-1,l.pagination.rowsPerPage).then((t=>{a.value=t.data.list,e.value={page:t.data.page+1,rowsPerPage:t.data.pageSize,rowsNumber:t.data.count},o.value=[]})).finally((()=>{t.value=!1}))});function c(){n({pagination:e.value})}return(0,l.bv)((()=>{c()})),{columns:re,selected:o,rows:a,pageConfig:e,newPagination:n,loading:t,afterSubmit:c}},components:{CreateCard:D,DeleteCofirmTable:A,updateImportHost:M,EditWhite:ne}});var ue=t(9885),se=t(1221),ie=t(7220);const me=(0,b.Z)(de,[["render",u],["__scopeId","data-v-7685794e"]]),pe=me;k()(de,"components",{QPage:ue.Z,QCard:v.Z,QCardSection:y.Z,QSeparator:V.Z,QTable:P.Z,QTr:z.Z,QTh:j.Z,QCheckbox:se.Z,QTd:ie.Z})}}]);