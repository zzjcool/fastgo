"use strict";(self["webpackChunkfast_front"]=self["webpackChunkfast_front"]||[]).push([[89],{96808:function(t,e,n){n.d(e,{b:function(){return g}});var r=n(47798),a=n.n(r),u=n(1001),o=n.n(u),i=n(3746),c=n(19302),l=n(91569),s="/pay";function p(t){return d.apply(this,arguments)}function d(){return d=o()(a()().mark((function t(e){var n,r,u;return a()().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.id,r=e.status,u=e.tradeId,t.abrupt("return",(0,l.api)({url:s+"/list",method:"get",params:{id:n,status:r,tradeId:u}}));case 2:case"end":return t.stop()}}),t)}))),d.apply(this,arguments)}function f(t){return m.apply(this,arguments)}function m(){return m=o()(a()().mark((function t(e){var n;return a()().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.orderId,t.abrupt("return",(0,l.api)({url:s+"/cancel",method:"delete",data:{orderId:n}}));case 2:case"end":return t.stop()}}),t)}))),m.apply(this,arguments)}function w(t){return y.apply(this,arguments)}function y(){return y=o()(a()().mark((function t(e){var n;return a()().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.amount,t.abrupt("return",(0,l.api)({url:s+"/alipay",method:"post",data:{amount:100*n,returnUrl:window.location.origin+"/#/pay/info"}}));case 2:case"end":return t.stop()}}),t)}))),y.apply(this,arguments)}var h=["未知","等待付款","付款成功","已退款","已取消"],v=["未知","微信","支付宝"],g=(0,i.Q_)("pay",(function(){var t=(0,c.Z)();function e(){return n.apply(this,arguments)}function n(){return n=o()(a()().mark((function t(){var e;return a()().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,p({status:1});case 2:if(e=t.sent,0!=e.data.count){t.next=5;break}return t.abrupt("return","");case 5:return t.abrupt("return",e.data.list[0].tradeId);case 6:case"end":return t.stop()}}),t)}))),n.apply(this,arguments)}function r(t){return u.apply(this,arguments)}function u(){return u=o()(a()().mark((function t(e){var n;return a()().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,p({tradeId:e});case 2:if(n=t.sent,0!=n.data.count){t.next=5;break}throw"订单不存在";case 5:return t.abrupt("return",n.data.list[0]);case 6:case"end":return t.stop()}}),t)}))),u.apply(this,arguments)}function i(t){return l.apply(this,arguments)}function l(){return l=o()(a()().mark((function t(e){return a()().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,f({orderId:e});case 2:case"end":return t.stop()}}),t)}))),l.apply(this,arguments)}function s(t){return d.apply(this,arguments)}function d(){return d=o()(a()().mark((function e(n){var r;return a()().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w({amount:n});case 3:return r=e.sent,e.abrupt("return",r.data.tradeId);case 7:if(e.prev=7,e.t0=e["catch"](0),!e.t0.response.data.data||!e.t0.response.data.data.tradeId){e.next=12;break}return t.notify({type:"warning",message:"存在未支付订单，前往处理"}),e.abrupt("return",e.t0.response.data.data.tradeId);case 12:t.notify({type:"negative",message:"请求错误："+e.t0});case 13:case"end":return e.stop()}}),e,null,[[0,7]])}))),d.apply(this,arguments)}return{statusMap:h,paymentTypeMap:v,hasWaitPayOrder:e,getOrderByTradeId:r,cancelOrderById:i,alipayOrder:s}}))},25089:function(t,e,n){n.r(e),n.d(e,{default:function(){return F}});var r=n(59835),a=n(86970),u=(0,r.Uk)("订单详情"),o=(0,r.Uk)("订单号"),i=(0,r.Uk)("支付方式"),c=(0,r.Uk)("订单金额"),l=(0,r.Uk)("订单状态，如果已经支付，请刷新页面"),s=(0,r.Uk)("请使用手机自带浏览器完成充值，如果充值过程有问题请微信联系"),p=(0,r._)("i",null,"toi-toi-toi",-1),d={class:"main-width"},f={class:"row q-col-gutter-md"},m={key:0,class:"col-12 col-sm-6"},w={key:1,class:"col-12 col-sm-6"},y={key:2,class:"col"};function h(t,e,n,h,v,g){var k=(0,r.up)("q-card-section"),b=(0,r.up)("q-card"),_=(0,r.up)("q-icon"),W=(0,r.up)("q-item-section"),x=(0,r.up)("q-skeleton"),I=(0,r.up)("q-item-label"),q=(0,r.up)("q-item"),Z=(0,r.up)("q-separator"),j=(0,r.up)("q-list"),Q=(0,r.up)("q-btn"),T=(0,r.up)("q-page");return(0,r.wg)(),(0,r.j4)(T,{class:"column items-center q-pt-md q-gutter-lg"},{default:(0,r.w5)((function(){return[(0,r.Wm)(b,{flat:"",class:"main-width"},{default:(0,r.w5)((function(){return[(0,r.Wm)(k,{class:"text-weight-bold text-subtitle1 bg-primary text-white"},{default:(0,r.w5)((function(){return[u]})),_:1})]})),_:1}),(0,r.Wm)(b,{flat:"",class:"main-width"},{default:(0,r.w5)((function(){return[(0,r.Wm)(j,null,{default:(0,r.w5)((function(){return[(0,r.Wm)(q,null,{default:(0,r.w5)((function(){return[(0,r.Wm)(W,{avatar:""},{default:(0,r.w5)((function(){return[(0,r.Wm)(_,{color:"blue-5",name:"tag"})]})),_:1}),(0,r.Wm)(W,null,{default:(0,r.w5)((function(){return[0==t.order.paymentType?((0,r.wg)(),(0,r.j4)(x,{key:0,type:"text"})):((0,r.wg)(),(0,r.j4)(I,{key:1},{default:(0,r.w5)((function(){return[(0,r.Uk)((0,a.zw)(t.order.tradeId),1)]})),_:1})),(0,r.Wm)(I,{caption:""},{default:(0,r.w5)((function(){return[o]})),_:1})]})),_:1})]})),_:1}),(0,r.Wm)(Z),(0,r.Wm)(q,null,{default:(0,r.w5)((function(){return[(0,r.Wm)(W,{avatar:""},{default:(0,r.w5)((function(){return[(0,r.Wm)(_,{color:"grey-6",name:"fa-solid fa-cart-shopping"})]})),_:1}),(0,r.Wm)(W,null,{default:(0,r.w5)((function(){return[0==t.order.paymentType?((0,r.wg)(),(0,r.j4)(x,{key:0,type:"text"})):((0,r.wg)(),(0,r.j4)(I,{key:1},{default:(0,r.w5)((function(){return[(0,r.Uk)((0,a.zw)(t.pay.paymentTypeMap[t.order.paymentType]),1)]})),_:1})),(0,r.Wm)(I,{caption:""},{default:(0,r.w5)((function(){return[i]})),_:1})]})),_:1})]})),_:1}),(0,r.Wm)(q,null,{default:(0,r.w5)((function(){return[(0,r.Wm)(W,{avatar:""},{default:(0,r.w5)((function(){return[(0,r.Wm)(_,{color:"amber",name:"money"})]})),_:1}),(0,r.Wm)(W,null,{default:(0,r.w5)((function(){return[0==t.order.paymentType?((0,r.wg)(),(0,r.j4)(x,{key:0,type:"text"})):((0,r.wg)(),(0,r.j4)(I,{key:1},{default:(0,r.w5)((function(){return[(0,r.Uk)((0,a.zw)((t.order.amount/100).toFixed(2)),1)]})),_:1})),(0,r.Wm)(I,{caption:""},{default:(0,r.w5)((function(){return[c]})),_:1})]})),_:1})]})),_:1}),(0,r.Wm)(q,null,{default:(0,r.w5)((function(){return[(0,r.Wm)(W,{avatar:""},{default:(0,r.w5)((function(){return[(0,r.Wm)(_,{color:"deep-orange-5",name:"timer"})]})),_:1}),(0,r.Wm)(W,null,{default:(0,r.w5)((function(){return[0==t.order.paymentType?((0,r.wg)(),(0,r.j4)(x,{key:0,type:"text"})):((0,r.wg)(),(0,r.j4)(I,{key:1},{default:(0,r.w5)((function(){return[(0,r.Uk)((0,a.zw)(t.pay.statusMap[t.order.status]),1)]})),_:1})),(0,r.Wm)(I,{caption:""},{default:(0,r.w5)((function(){return[l]})),_:1})]})),_:1})]})),_:1})]})),_:1})]})),_:1}),(0,r.Wm)(b,{flat:"",class:"main-width q-pa-md text-grey"},{default:(0,r.w5)((function(){return[(0,r.Wm)(_,{class:"q-pr-xs",name:"info"}),s,p]})),_:1}),(0,r._)("div",d,[(0,r._)("div",f,[1==t.order.status?((0,r.wg)(),(0,r.iD)("div",m,[(0,r.Wm)(Q,{unelevated:"",color:"red-5",label:"取消订单",class:"full-width",onClick:e[0]||(e[0]=function(e){return t.cancelOrder(t.order.id)})})])):(0,r.kq)("",!0),1==t.order.status?((0,r.wg)(),(0,r.iD)("div",w,[(0,r.Wm)(Q,{unelevated:"",color:"orange-6",label:"点击充值",class:"full-width",href:t.order.jumpTo},null,8,["href"])])):((0,r.wg)(),(0,r.iD)("div",y,[(0,r.Wm)(Q,{unelevated:"",color:"orange-6",label:"前往充值页面",class:"full-width",to:{name:"pay"}})]))])])]})),_:1})}var v=n(47798),g=n.n(v),k=n(1001),b=n.n(k),_=n(19302),W=n(96808),x=n(60499),I=n(28339),q=(0,r.aZ)({name:"InfoPage",setup:function(){var t=(0,I.yj)(),e=(0,I.tv)(),n=(0,_.Z)(),a=(0,W.b)(),u=t.query.tradeId,o=(0,x.iH)({id:"加载中",amount:0,paymentType:0,status:0,jumpTo:""});function i(t){return c.apply(this,arguments)}function c(){return c=b()(g()().mark((function t(n){return g()().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log(n),t.next=3,a.cancelOrderById(n);case 3:e.go();case 4:case"end":return t.stop()}}),t)}))),c.apply(this,arguments)}return u||(n.notify({type:"negative",message:"订单不存在。"}),e.back()),(0,r.bv)(b()(g()().mark((function t(){return g()().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,a.getOrderByTradeId(u);case 2:o.value=t.sent,console.log(o);case 4:case"end":return t.stop()}}),t)})))),{order:o,pay:a,cancelOrder:i,data:(0,x.iH)({payMethodOptions:[{label:"支付宝",value:"alipay",icon:"fa-brands  fa-alipay",color:"light-blue-14"},{label:"微信支付（接入中）",value:"wechatpay",icon:"fa-brands  fa-weixin",color:"grey-4",disable:!0}],amount:0})}}}),Z=n(11639),j=n(69885),Q=n(44458),T=n(63190),U=n(13246),O=n(490),B=n(76749),C=n(22857),M=n(57133),z=n(33115),P=n(50926),S=n(24455),D=n(69984),H=n.n(D);const L=(0,Z.Z)(q,[["render",h]]);var F=L;H()(q,"components",{QPage:j.Z,QCard:Q.Z,QCardSection:T.Z,QList:U.Z,QItem:O.Z,QItemSection:B.Z,QIcon:C.Z,QSkeleton:M.ZP,QItemLabel:z.Z,QSeparator:P.Z,QBtn:S.Z})}}]);