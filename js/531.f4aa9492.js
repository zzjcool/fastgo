"use strict";(self["webpackChunkfast_front"]=self["webpackChunkfast_front"]||[]).push([[531],{41272:function(e,t,n){n.d(t,{$Z:function(){return p},sb:function(){return i},vS:function(){return f}});var a=n(47798),r=n.n(a),u=n(1001),o=n.n(u),l=n(91569),c="/balance";function i(){return s.apply(this,arguments)}function s(){return s=o()(r()().mark((function e(){return r()().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.api)({url:c,method:"get"}));case 1:case"end":return e.stop()}}),e)}))),s.apply(this,arguments)}function p(e){return d.apply(this,arguments)}function d(){return d=o()(r()().mark((function e(t){return r()().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.api)({url:"/admin"+c,method:"get",params:{email:t}}));case 1:case"end":return e.stop()}}),e)}))),d.apply(this,arguments)}function f(e,t){return m.apply(this,arguments)}function m(){return m=o()(r()().mark((function e(t,n){return r()().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.api)({url:"/admin"+c,method:"put",data:{email:t,delta:n}}));case 1:case"end":return e.stop()}}),e)}))),m.apply(this,arguments)}},70917:function(e,t,n){n.d(t,{Ht:function(){return f},TI:function(){return w},p6:function(){return p},uD:function(){return i}});var a=n(47798),r=n.n(a),u=n(1001),o=n.n(u),l=n(91569),c="/whitesite";function i(){return s.apply(this,arguments)}function s(){return s=o()(r()().mark((function e(){var t,n,a=arguments;return r()().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:0,n=a.length>1&&void 0!==a[1]?a[1]:10,e.abrupt("return",(0,l.api)({url:c+"/list",method:"get",params:{page:t,pageSize:n}}));case 3:case"end":return e.stop()}}),e)}))),s.apply(this,arguments)}function p(e){return d.apply(this,arguments)}function d(){return d=o()(r()().mark((function e(t){var n,a,u,o;return r()().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.name,a=t.home,u=t.comment,o=t.importHost,e.abrupt("return",(0,l.api)({url:c,method:"post",data:{name:n,home:a,comment:u,importHost:o}}));case 2:case"end":return e.stop()}}),e)}))),d.apply(this,arguments)}function f(e){return m.apply(this,arguments)}function m(){return m=o()(r()().mark((function e(t){return r()().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.api)({url:c,method:"delete",data:{ids:t}}));case 1:case"end":return e.stop()}}),e)}))),m.apply(this,arguments)}function w(e){return h.apply(this,arguments)}function h(){return h=o()(r()().mark((function e(t){return r()().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.api)({url:c,method:"put",data:t}));case 1:case"end":return e.stop()}}),e)}))),h.apply(this,arguments)}},84531:function(e,t,n){n.r(t),n.d(t,{default:function(){return te}});var a=n(59835),r=n(86970),u=function(e){return(0,a.dD)("data-v-62a79118"),e=e(),(0,a.Cn)(),e},o=u((function(){return(0,a._)("div",{class:"text-h6"},"用户管理",-1)})),l={style:{width:"100%"}},c={class:"text-subtitle1 text-white text-weight-bold"};function i(e,t,n,u,i,s){var p=(0,a.up)("q-card-section"),d=(0,a.up)("q-separator"),f=(0,a.up)("q-checkbox"),m=(0,a.up)("q-th"),w=(0,a.up)("q-tr"),h=(0,a.up)("update-balance"),b=(0,a.up)("q-td"),g=(0,a.up)("edit-white"),v=(0,a.up)("q-table"),y=(0,a.up)("q-card"),_=(0,a.up)("q-page");return(0,a.wg)(),(0,a.j4)(_,{class:"column"},{default:(0,a.w5)((function(){return[(0,a.Wm)(y,{class:"list-card",square:"",flat:""},{default:(0,a.w5)((function(){return[(0,a.Wm)(p,{class:"bg-primary text-white"},{default:(0,a.w5)((function(){return[o]})),_:1}),(0,a.Wm)(d),(0,a._)("div",l,[(0,a.Wm)(v,{rows:e.rows,loading:e.loading,columns:e.columns,selection:"multiple",selected:e.selected,"onUpdate:selected":t[0]||(t[0]=function(t){return e.selected=t}),"row-key":"name",flat:"",pagination:e.pageConfig,"onUpdate:pagination":t[1]||(t[1]=function(t){return e.pageConfig=t}),onRequest:e.newPagination,square:""},{header:(0,a.w5)((function(e){return[(0,a.Wm)(w,{props:e},{default:(0,a.w5)((function(){return[(0,a.Wm)(m,{class:"bg-primary"},{default:(0,a.w5)((function(){return[(0,a.Wm)(f,{modelValue:e.selected,"onUpdate:modelValue":function(t){return e.selected=t},color:"accent","keep-color":"",class:"text-black"},null,8,["modelValue","onUpdate:modelValue"])]})),_:2},1024),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.cols,(function(t){return(0,a.wg)(),(0,a.j4)(m,{key:t.name,props:e,class:"bg-primary"},{default:(0,a.w5)((function(){return[(0,a._)("div",c,(0,r.zw)(t.label),1)]})),_:2},1032,["props"])})),128))]})),_:2},1032,["props"])]})),"body-cell-balance":(0,a.w5)((function(t){return[(0,a.Wm)(b,{props:t},{default:(0,a.w5)((function(){return[(0,a.Wm)(h,{data:t,afterFunc:e.afterSubmit,loading:e.loading},null,8,["data","afterFunc","loading"])]})),_:2},1032,["props"])]})),"body-cell-operation":(0,a.w5)((function(t){return[(0,a.Wm)(b,{props:t},{default:(0,a.w5)((function(){return[(0,a.Wm)(g,{data:t,afterFunc:e.afterSubmit,loading:e.loading},null,8,["data","afterFunc","loading"])]})),_:2},1032,["props"])]})),_:1},8,["rows","loading","columns","selected","pagination","onRequest"])])]})),_:1})]})),_:1})}n(65716),n(59437),n(24110);var s=n(19302),p=n(92138),d=n(60499),f={class:"text-left q-gutter-md"},m=(0,a._)("div",{class:"row no-wrap items-center"},[(0,a._)("div",{class:"col text-h6 ellipsis"}," 编辑 ")],-1),w={class:"column"};function h(e,t,n,r,u,o){var l=(0,a.up)("q-card-section"),c=(0,a.up)("q-icon"),i=(0,a.up)("q-input"),s=(0,a.up)("q-btn"),p=(0,a.up)("q-form"),d=(0,a.up)("q-separator"),h=(0,a.up)("q-card"),b=(0,a.up)("q-dialog");return(0,a.wg)(),(0,a.iD)("div",f,[(0,a.Wm)(s,{icon:"edit",unelevated:"",round:"",size:"sm",color:"accent",onClick:t[6]||(t[6]=function(t){return e.card=!0})},{default:(0,a.w5)((function(){return[(0,a.Wm)(b,{modelValue:e.card,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.card=t})},{default:(0,a.w5)((function(){return[(0,a.Wm)(h,{class:"create-card"},{default:(0,a.w5)((function(){return[(0,a.Wm)(l,{class:"bg-secondary text-white"},{default:(0,a.w5)((function(){return[m]})),_:1}),(0,a.Wm)(l,{class:""},{default:(0,a.w5)((function(){return[(0,a.Wm)(p,{onSubmit:t[4]||(t[4]=function(t){return e.onSubmit(e.newData)}),class:"q-gutter-md"},{default:(0,a.w5)((function(){return[(0,a.Wm)(i,{filled:"",modelValue:e.newData.name,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.newData.name=t}),color:"accent",disable:"",hint:"不可更改","label-color":"accent",label:"站点名称","lazy-rules":"",rules:[function(e){return e&&e.length>0||"至少要写点什么吧"}]},{prepend:(0,a.w5)((function(){return[(0,a.Wm)(c,{name:"public",color:"accent"})]})),_:1},8,["modelValue","rules"]),(0,a.Wm)(i,{filled:"",modelValue:e.newData.home,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.newData.home=t}),hint:"站点主页的地址，为了安全，只支持https协议",label:"主页",color:"accent","label-color":"accent","lazy-rules":"",rules:[function(e){return e&&e.length>0||"至少要写点什么吧"}]},{prepend:(0,a.w5)((function(){return[(0,a.Wm)(c,{name:"link",color:"accent"})]})),_:1},8,["modelValue","rules"]),(0,a.Wm)(i,{filled:"",modelValue:e.newData.comment,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.newData.comment=t}),label:"介绍",color:"accent","label-color":"accent","lazy-rules":""},{prepend:(0,a.w5)((function(){return[(0,a.Wm)(c,{name:"comment",color:"accent"})]})),_:1},8,["modelValue"]),(0,a.Wm)(i,{hint:"每条记录一行",label:"匹配URL",modelValue:e.text,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.text=t}),filled:"",color:"accent","label-color":"accent",autogrow:""},{prepend:(0,a.w5)((function(){return[(0,a.Wm)(c,{name:"add_link",color:"accent"})]})),_:1},8,["modelValue"]),(0,a._)("div",w,[(0,a.Wm)(s,{label:"确认",type:"submit",unelevated:"",color:"accent"})])]})),_:1})]})),_:1}),(0,a.Wm)(d)]})),_:1})]})),_:1},8,["modelValue"])]})),_:1})])}var b=n(47798),g=n.n(b),v=n(1001),y=n.n(v),_=n(70917),W=(0,a.aZ)({name:"editWhite",props:{data:Object,loading:Boolean,afterFunc:{type:Function,default:function(){}}},setup:function(e){var t=(0,d.iH)(!1),n=(0,s.Z)(),a=(0,d.iH)({id:e.data.row.id,name:e.data.row.name,home:e.data.row.home,comment:e.data.row.comment,enable:e.data.row.enable});function r(e){return e?e.join("\n"):""}var u=(0,d.iH)(r(e.data.row.importHost));function o(e){return l.apply(this,arguments)}function l(){return l=y()(g()().mark((function a(r){return g()().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r.importHost=u.value.split("\n"),a.next=3,(0,_.TI)(r).catch((function(e){return n.notify({type:"negative",message:"更新失败"}),Promise.reject(error)}));case 3:n.notify({type:"positive",message:"更新成功"}),t.value=!1,e.afterFunc();case 6:case"end":return a.stop()}}),a)}))),l.apply(this,arguments)}return{newData:a,onSubmit:o,card:t,text:u}}}),Z=n(11639),q=n(24455),x=n(32074),k=n(44458),Q=n(63190),V=n(8326),C=n(66611),D=n(22857),H=n(50926),S=n(69984),U=n.n(S);const F=(0,Z.Z)(W,[["render",h]]);var P=F;U()(W,"components",{QBtn:q.Z,QDialog:x.Z,QCard:k.Z,QCardSection:Q.Z,QForm:V.Z,QInput:C.Z,QIcon:D.Z,QSeparator:H.Z});n(95149);var j={class:"row no-wrap text-h6 items-center"},I=(0,a._)("div",{class:"col ellipsis"},"余额修改",-1),z={class:"q-pa-md"},T={class:"column"};function B(e,t,n,r,u,o){var l=(0,a.up)("q-badge"),c=(0,a.up)("q-icon"),i=(0,a.up)("q-card-section"),s=(0,a.up)("q-input"),p=(0,a.up)("q-separator"),d=(0,a.up)("q-btn"),f=(0,a.up)("q-card"),m=(0,a.up)("q-dialog");return(0,a.wg)(),(0,a.iD)("div",{class:"row",onClick:t[3]||(t[3]=function(t){return e.layout=!e.layout})},[null!=e.balance?((0,a.wg)(),(0,a.j4)(l,{key:0,color:"accent",label:e.balance.toFixed(3)},null,8,["label"])):(0,a.kq)("",!0),(0,a.Wm)(m,{modelValue:e.layout,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.layout=t})},{default:(0,a.w5)((function(){return[(0,a.Wm)(f,{class:"create-card"},{default:(0,a.w5)((function(){return[(0,a.Wm)(i,{class:"bg-primary text-accent"},{default:(0,a.w5)((function(){return[(0,a._)("div",j,[(0,a.Wm)(c,{name:"warning"}),I])]})),_:1}),(0,a._)("div",z,[(0,a.Wm)(s,{type:"number",hint:"增加或者减少余额",modelValue:e.delta,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.delta=t})},null,8,["modelValue"])]),(0,a.Wm)(p),(0,a.Wm)(i,{class:""},{default:(0,a.w5)((function(){return[(0,a._)("div",T,[(0,a.Wm)(d,{label:"更新",color:"accent",unelevated:"",onClick:t[1]||(t[1]=function(t){return e.onUpdate(e.data.row.email,parseFloat(e.delta))})})])]})),_:1})]})),_:1})]})),_:1},8,["modelValue"])])}var R=n(41272),E=(0,a.aZ)({name:"updateFiled",props:{data:Object,loading:Boolean,afterFunc:{type:Function,default:function(){}}},setup:function(e){var t=(0,d.iH)(!1),n=(0,s.Z)(),r=(0,d.iH)(0),u=(0,d.iH)(0);function o(){return l.apply(this,arguments)}function l(){return l=y()(g()().mark((function t(){var n;return g()().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(0,R.$Z)(e.data.row.email);case 2:n=t.sent,r.value=n.data.balance;case 4:case"end":return t.stop()}}),t)}))),l.apply(this,arguments)}function c(e,t){return i.apply(this,arguments)}function i(){return i=y()(g()().mark((function a(r,u){return g()().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,(0,R.vS)(r,u).catch((function(e){return n.notify({type:"negative",message:"更新失败"}),Promise.reject(error)}));case 2:n.notify({type:"positive",message:"更新成功"}),o(),t.value=!1,e.afterFunc();case 6:case"end":return a.stop()}}),a)}))),i.apply(this,arguments)}return(0,a.bv)(y()(g()().mark((function e(){return g()().wrap((function(e){while(1)switch(e.prev=e.next){case 0:o();case 1:case"end":return e.stop()}}),e)})))),{layout:t,onUpdate:c,balance:r,delta:u}}}),N=n(20990),O=n(42449);const $=(0,Z.Z)(E,[["render",B]]);var A=$;U()(E,"components",{QBadge:N.Z,QDialog:x.Z,QCard:k.Z,QCardSection:Q.Z,QIcon:D.Z,QInput:C.Z,QSeparator:H.Z,QBtn:q.Z,QTable:O.Z});var K=[{name:"id",align:"left",label:"ID",field:"id",sortable:!1},{name:"email",align:"left",label:"邮箱",field:"email",sortable:!1},{name:"name",align:"left",label:"名称",field:"name",sortable:!1},{name:"balance",align:"left",label:"余额",field:"balance",sortable:!1},{name:"operation",align:"left",label:"操作",field:"operation",sortable:!1}],L=(0,a.aZ)({name:"UserAdmin",setup:function(){var e=(0,d.iH)({page:1,rowsPerPage:10,rowsNumber:0}),t=(0,d.iH)([]),n=(0,d.iH)(!1),r=(0,d.iH)([]),u=((0,s.Z)(),function(a){n.value=!0,(0,p.lE)(a.pagination.page-1,a.pagination.rowsPerPage).then((function(n){t.value=n.data.list,e.value={page:n.data.page+1,rowsPerPage:n.data.pageSize,rowsNumber:n.data.count},r.value=[]})).finally((function(){n.value=!1}))});function o(){u({pagination:e.value})}return(0,a.bv)((function(){o()})),{columns:K,selected:r,rows:t,pageConfig:e,newPagination:u,loading:n,afterSubmit:o}},components:{updateBalance:A,EditWhite:P}}),Y=n(69885),G=n(31233),J=n(21682),M=n(11221),X=n(67220);const ee=(0,Z.Z)(L,[["render",i],["__scopeId","data-v-62a79118"]]);var te=ee;U()(L,"components",{QPage:Y.Z,QCard:k.Z,QCardSection:Q.Z,QSeparator:H.Z,QTable:O.Z,QTr:G.Z,QTh:J.Z,QCheckbox:M.Z,QTd:X.Z})}}]);